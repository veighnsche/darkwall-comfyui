[pytest]
# BDD Configuration
bdd_features_base_dir = tests/features/
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for BDD scenarios
markers =
    planned: Mark test as planned (not yet implemented)
    REQ-CORE-001: Core requirement - Single-shot execution
    REQ-CORE-002: Core requirement - Generation flow
    REQ-CORE-003: Core requirement - Exit codes
    REQ-COMFY-001: ComfyUI requirement - Workflow loading
    REQ-COMFY-002: ComfyUI requirement - Prompt injection
    REQ-COMFY-003: ComfyUI requirement - Polling
    REQ-COMFY-004: ComfyUI requirement - Retry logic
    REQ-COMFY-005: ComfyUI requirement - Health check
    REQ-COMFY-006: ComfyUI requirement - Queue position reporting
    REQ-PROMPT-001: Prompt requirement - Template-based
    REQ-PROMPT-002: Prompt requirement - Wildcard syntax
    REQ-PROMPT-003: Prompt requirement - Variant syntax
    REQ-PROMPT-004: Prompt requirement - Negative prompts
    REQ-PROMPT-005: Prompt requirement - Deterministic seeding
    REQ-PROMPT-006: Prompt requirement - Preview CLI
    REQ-PROMPT-007: Prompt requirement - List CLI
    REQ-WORKFLOW-001: Workflow requirement - ID equals filename
    REQ-WORKFLOW-002: Workflow requirement - Prompts relationship
    REQ-WORKFLOW-003: Workflow requirement - Random selection
    REQ-WORKFLOW-004: Workflow requirement - Missing workflow error
    REQ-WORKFLOW-005: Workflow requirement - JSON validation
    REQ-THEME-001: Theme requirement - Directory structure
    REQ-THEME-002: Theme requirement - Config section
    REQ-THEME-003: Theme requirement - Legacy fallback
    REQ-THEME-004: Theme requirement - Global theme only
    REQ-THEME-005: Theme requirement - Fallback on missing
    REQ-THEME-006: Theme requirement - Default auto-creation
    REQ-THEME-007: Theme requirement - Init creates structure
    REQ-MONITOR-001: Monitor requirement - Auto-detection
    REQ-MONITOR-002: Monitor requirement - Compositor names
    REQ-MONITOR-003: Monitor requirement - Inline config
    REQ-MONITOR-004: Monitor requirement - Error on unconfigured
    REQ-MONITOR-005: Monitor requirement - State persistence
    REQ-MONITOR-006: Monitor requirement - Output paths
    REQ-MONITOR-007: Monitor requirement - Per-monitor workflows
    REQ-MONITOR-008: Monitor requirement - Independent selection
    REQ-MONITOR-009: Monitor requirement - CLI override
    REQ-MONITOR-010: Monitor requirement - Compositor error handling
    REQ-MONITOR-011: Monitor requirement - Detection caching
    REQ-MONITOR-012: Monitor requirement - Unconfigured monitor handling
    REQ-MONITOR-013: Monitor requirement - Disconnected monitor handling
    REQ-SCHED-001: Schedule requirement - Time slot determinism
    REQ-SCHED-002: Schedule requirement - Solar switching
    REQ-SCHED-003: Schedule requirement - Probability blend
    REQ-SCHED-004: Schedule requirement - 24h status
    REQ-WALL-001: Wallpaper requirement - Built-in setters
    REQ-WALL-002: Wallpaper requirement - Custom commands
    REQ-WALL-003: Wallpaper requirement - Swaybg management
    REQ-WALL-005: Wallpaper requirement - Setter failure handling
    REQ-HIST-001: History requirement - Saving
    REQ-HIST-002: History requirement - Gallery CLI
    REQ-HIST-003: History requirement - Cleanup policy
    REQ-HIST-004: History requirement - Favorites
    REQ-CLI-001: CLI requirement - Command structure
    REQ-CLI-002: CLI requirement - Global flags
    REQ-CLI-003: CLI requirement - Dry run
    REQ-CONFIG-001: Config requirement - TOML format
    REQ-CONFIG-002: Config requirement - Env overrides
    REQ-CONFIG-003: Config requirement - Auto-init
    REQ-CONFIG-004: Config requirement - Validation
    REQ-CONFIG-005: Config requirement - Breaking changes
    REQ-MISC-001: Misc requirement - Notifications
    REQ-MISC-003: Misc requirement - JSON output

# Test output
addopts = -v --tb=short

# Ignore directories
norecursedirs = .git .nix-* result node_modules __pycache__
